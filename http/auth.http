@baseUrl = http://localhost:8000/api/v1
@contentType = application/json

### Variables for testing
@username = newuser
@password = admin123456
@email = admin@example.com

### Login with credentials
# @name login
POST {{baseUrl}}/auth/login_credentials/
Content-Type: {{contentType}}

{
    "username": "{{username}}",
    "password": "{{password}}"
}

### Store auth tokens from login response
@accessToken = {{login.response.body.access_token}}
@refreshToken = {{login.response.body.refresh_token}}

### Register new user
POST {{baseUrl}}/auth/register_credentials/
Content-Type: {{contentType}}

{
    "username": "newuser",
    "email": "newuser@example.com",
    "password": "password123"
}

### Logout (requires authentication)
POST {{baseUrl}}/auth/logout/
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
    "refresh_token": "{{refreshToken}}"
}

### Forgot Password
POST {{baseUrl}}/auth/forgot_password/
Content-Type: {{contentType}}

{
    "email": "{{email}}"
}

### Reset Password (requires reset token)
POST {{baseUrl}}/auth/reset_password/
Content-Type: {{contentType}}

{
    "token": "reset_token_here",
    "password": "newpassword123"
}

### Change Password (requires authentication)
POST {{baseUrl}}/auth/change_password/
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
    "current_password": "{{password}}",
    "new_password": "admin123456"
}

### Get new Access Token using Refresh Token
POST {{baseUrl}}/auth/access_token/
Content-Type: {{contentType}}

{
    "refresh_token": "{{refreshToken}}"
}

### Get new Refresh Token using Access Token
POST {{baseUrl}}/auth/refresh_token/
Content-Type: {{contentType}}

{
    "access_token": "{{accessToken}}"
}

### Get Session Info (requires authentication)
GET {{baseUrl}}/auth/session/
Authorization: Bearer {{accessToken}}

### Get Tokens (requires authentication)
GET {{baseUrl}}/auth/tokens/
Authorization: Bearer {{accessToken}}